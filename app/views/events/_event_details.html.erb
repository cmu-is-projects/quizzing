<script>
    $(document).ready(function(){
    $('.collapsible').collapsible({
      accordion : false // A setting that changes the collapsible behavior to expandable instead of the default accordion style
    });
  });
</script>

<h5> Quizzing Results Matrix </h5>

<ul class="collapsible popout" data-collapsible="accordion">
  <!--Senior A Matrix -->
  <li>
    <div class="collapsible-header"><i></i>Senior A</div>
    <div class="collapsible-body">
      <table class="striped responsive">
        <thead>
          <tr>
              <th>Round</th>
              <% count = @total_room_num.to_i%>
              <% while count != 0 %>
                <th>Room <%= @total_room_num-count+1 %></th>
                <% count -= 1%>
              <% end %>
          </tr>
        </thead>

        <tbody>
          <% round_count=1 %>
          <% count_m = 0 %>
          <% room_count =1 %>
          <% round = @senior_a_round_num.to_i%>
          <% while round >= round_count %>
            <tr>
              <td> <%= round_count %></td>
                <% while (@senior_a_matrix[count_m] != nil) && (round_count == @senior_a_matrix[count_m][0]) %>

                  <!-- checks if array has the right room number -->
                  <% if room_count == @senior_a_matrix[count_m][1] %>
                    <td>
                      round#:<%= @senior_a_matrix[count_m][0] %><br>
                      room#: <%= @senior_a_matrix[count_m][1] %><br>
                      <%= @senior_a_matrix[count_m][2].team.name %><br>
                      <%= @senior_a_matrix[count_m][3].team.name %><br>
                      <%= @senior_a_matrix[count_m][4].team.name %><br>
                    </td>
                    <% room_count +=1 %>
                  <% else %>
                    <td></td>
                    <% room_count +=1 %> 
                  <% end %>

                  <% count_m +=1 %>
                <% end %>
            </tr>
            <% room_count =1 %>
            <% round_count +=1 %>
          <% end %>
        </tbody>
      </table>
    </div>
  </li>

  <!--Senior B Matrix -->
  <li>
    <div class="collapsible-header"><i></i>Senior B</div>
    <div class="collapsible-body">
      <table class="striped responsive">
        <thead>
          <tr>
              <th>Round</th>
              <% count = @total_room_num.to_i%>
              <% while count != 0 %>
                <th>Room <%= @total_room_num-count+1 %></th>
                <% count -= 1%>
              <% end %>
          </tr>
        </thead>

        <tbody>
          <% room_count=1 %>
          <% round_count=1 %>
          <% count_m = 0 %>
          <% round = @senior_b_round_num.to_i %>
          <% while round > round_count %>
            <tr>
              <td> <%= round_count %></td>
                <% while round_count == @senior_b_matrix[count_m][0] %>
                    <td>
                      round#:<%= @senior_b_matrix[count_m][0] %><br>
                      room#: <%= @senior_b_matrix[count_m][1] %><br>
                      <%= @senior_b_matrix[count_m][2].team.name %><br>
                      <%= @senior_b_matrix[count_m][3].team.name %><br>
                      <%= @senior_b_matrix[count_m][4].team.name %><br>
                    </td>
                  <% count_m +=1 %>

              <%end %>
            <% round_count+=1 %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </li>

  <!--Senior A Matrix -->
  <li>
    <div class="collapsible-header"><i</i>Junior</div>
    <div class="collapsible-body">
      <table class="striped responsive">
        <thead>
          <tr>
              <th>Round</th>
              <% count = @total_room_num.to_i%>
              <% while count != 0 %>
                <th>Room <%= @total_room_num-count+1 %></th>
                <% count -= 1%>
              <% end %>
          </tr>
        </thead>

        <tbody>
          <% round_count=1 %>
          <% count_m = 0 %>
          <% round = @junior_round_num.to_i %>
          <% while round > round_count %>
            <tr>
              <td> <%= round_count %></td>
                <% while round_count == @junior_matrix[count_m][0] %>
                  <td>
                    round number:<%= @junior_matrix[count_m][0] %><br>
                    room number: <%= @junior_matrix[count_m][1] %><br>
                    <%= @junior_matrix[count_m][2].team.name %><br>
                    <%= @junior_matrix[count_m][3].team.name %><br>
                    <%= @junior_matrix[count_m][4].team.name %><br>
                  </td>
                <% count_m +=1 %>
              <% end %>
            <% round_count+=1 %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </li>
</ul>



<% @divisions.each do |dvsn| %>

 <div class="small-4 columns">
   <%= render partial: "event_standings", locals: { passed_in_div: dvsn } %>
 </div>

<% end %>

